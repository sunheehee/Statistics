# 통계학 4주차 정규과제

📌통계학 정규과제는 매주 정해진 분량의 『*데이터 분석가가 반드시 알아야 할 모든 것*』 을 읽고 학습하는 것입니다. 이번 주는 아래의 **Statistics_4th_TIL**에 나열된 분량을 읽고 `학습 목표`에 맞게 공부하시면 됩니다.

아래의 문제를 풀어보며 학습 내용을 점검하세요. 문제를 해결하는 과정에서 개념을 스스로 정리하고, 필요한 경우 추가자료와 교재를 다시 참고하여 보완하는 것이 좋습니다.

4주차는 `2부. 데이터 분석 준비하기`를 읽고 새롭게 배운 내용을 정리해주시면 됩니다.


## Statistics_4th_TIL

### 2부. 데이터 분석 준비하기
### 10. 데이터 탐색과 시각화



## Study Schedule

|주차 | 공부 범위     | 완료 여부 |
|----|----------------|----------|
|1주차| 1부 p.2~56     | ✅      |
|2주차| 1부 p.57~79    | ✅      | 
|3주차| 2부 p.82~120   | ✅      | 
|4주차| 2부 p.121~202  | ✅      | 
|5주차| 2부 p.203~254  | 🍽️      | 
|6주차| 3부 p.300~356  | 🍽️      | 
|7주차| 3부 p.357~615  | 🍽️      | 

<!-- 여기까진 그대로 둬 주세요-->

# 10. 데이터 탐색과 시각화

```
✅ 학습 목표 :
* EDA의 목적을 설명할 수 있다.
* 주어진 데이터셋에서 이상치, 누락값, 분포 등을 식별하고 EDA 결과를 바탕으로 데이터셋의 특징을 해석할 수 있다.
* 공분산과 상관계수를 활용하여 두 변수 간의 관계를 해석할 수 있다.
* 적절한 시각화 기법을 선택하여 데이터의 특성을 효과적으로 전달할 수 있다.
```
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->


## EDA의 목적
EDA는 가공하지 않는 원천의 데이터를 있는 그대로 탐색하고 분석하는 기법이다.

**<U>기술 통게와 시각화를 통해 데이터의 특성을 파악**</U>하는 것이 EDA의 주 목적이다.

- 데이터의 형태와 척도가 분석에 알맞게 되어있는지 확인 `skew()`, `kurtosis()`
- 데이터의 평균, 분산, 분포, 패턴 등의 확인을 통해 데이터 특성 파악 `describe()`, `info()`
- 데이터의 결측값이나, 이상치 파악 및 보완 `info()`, `isnull()`
- 변수 간의 관계성 파악
- 분석 목적과 방향성 점검 및 보정

### ✨엑셀로 EDA하기
파이썬, R, SAS등의 데이터 가공 및 시각화 기능이 아무리 좋다하더라도, 적은 양의 데이터를 다룰 때는 엑셀만큼 사용자 친화적이고, 효율적인 프로그램이 없다.


## 공분산과 상관계수

EDA과정에서 평균, 분산, 왜도, 첨도, 그리고 결측치 등 각 변수들의 특성을 파악한 다음, **<U>변수간의 관계를 파악하는 과정이 필요</U>**하다.

- 타깃 변수 Y와 입력변수 X와의 관계
- 입력변수 X와 입력변수 X간의 관계

    ➡️ 데이터에 대한 이해도를 높일 수 있음

    ➡️ 다중공선성 방지
    
        ```
        🔎다중공선성이란?
        
        독립 변수의 변화에 따른 종속 변수의 변화량을 크게해서, 통계적 정확도를 감소시키는 특성

         ```

    변수 간의 상관관계를 파악하는 대표적인 개념으로 공분산과 상관계수가 있다. 

### 상관분석의 기본 가정
   
 상관분석을 하기 위해서는 우선 **<U>(1)데이터가 등간이나 비율 척도</U>**이며, **<U>(2)두 변수가 선형적 관계**</U>라는 기본 가정을 두어야한다.

![alt text](<image/상관관계 예시.png>)


### 공분산(Covariance)

공분산: 서로 공유하는 분산
- 분산: 한 변수의 각각의 데이터가 퍼진 정도를 나타낸다면,
- 공분산: 두 변수의 분산의 관계.
    - 양의 상관관계: X1이 커지면 X2도 커진다
    - 음의 상관관계: X1이 커지면 X2는 작아진다.
    - 상관관계 = 0: X1과 X2는 선형적인 관계가 없다.

- 한계점: 각 변수 간의 다른 척도기준이 그대로 반영되어 공분산 값이 지니는 크기가 상관성의 정도를 나타내지 못한다.

    예를 들어,

    x1과 x2의 공분산: 1300

    x3과 x4의 공분산: 800

    ‼️ x1과 x2의 상관관계가 x3과 x4의 상관관계보다 크다고 할수는 없다.

    ➡️ 공분산을 변수 각각의 표준편차 값으로 나누는 정규화를 진행해 상관성을 비교하기도 한다.

    ➡️ 하지만 이 역시 절대적인 기준이 될 수 없어서 피어슨 상관계수를 사용한다.


### 상관계수

피어슨 상관계수 [ -1 <= R <= 1 ]

```
= x1과 x2가 함께 변하는 정도(공분산) / x1과 x2가 변하는 전체 정도
```

상관계수를 해석하는 기준은 분야마다 차이가 있지만, 일반적인 사회과학에서 상관계수를 해석하는 기준은 절대값이 0.7 이상일 때, 상관관계가 매우 높다고 판단하며, 0.4 이상이면 어느정도 있다고 해석.

![alt text](<image/데이터 분포에 따른 상관계수.png>)
  

**‼️주의할 점**
산점도의 기울기와 상관계수는 관련이 없다.

분산의 관계성이 같다면, 기울기가 크든 작든 상관계수는 같다. 

예를 들어, 1과 -1의 경우 기울기가 다르지만, 상관계수는 1로 같다. 즉, x1과 x2의 상관계수가 높다는 것은 x2를 예상할 수 있는 정확도(설명력)가 높음을 의미한다.

### 결정계수

상관계수를 제곱한 값을 결정계수라고 한다.

→ 해당 독립변수가 종속변수의 변동을 설명하는 정도

✔️ 회귀분석의 정확도를 가늠하는 중요한 기준이 된다.


## 시각화로 데이터 특성 확인하기기

### `.pairplot()` : 산점도 행렬 

![alt text](<image/산점도 행렬.png>)

- diag_kind = 'kde' 옵션을 설정하면, 동일한 변수의 산점도를 분포로 표현함.

    ➡️ 동일한 변수의 산점도는 직선으로만 나오기 때문에 이 옵션을 설정하면 분포를 확인할 수 있어 하나의 그래프내에서도 정보량을 늘릴 수 있다.

### `.cov()`: 공분산 확인

![alt text](<image/공분산 확인.png>)  

**공분산은 <u>각 변수 간의 다른 척도기준이 그대로 반영</u>되어** 직관적으로 상관성의 높고 낮음을 파악하기 힘들다.


### `.corr()`: 상관계수 확인

![alt text](<image/상관계수 확인.png>)

### 히트맵
```python
np.triu(np.ones_like(df.corr()))

mask = np.triu(np.ones_like(df.corr(), dtype=np.bool))

fig, ax = plt.subplots(figsize = (15,10))
sns.heatmap(df.corr(),
            mask=mask,
            vmin = -1
            vmax = 1,
            annot=True #상관계수 출력
            cmap= ~ #색상테마 설정
            cbar = True # 컬러바 출력여부)
ax.set_title('제목설정')
```

![alt text](<image/가독성 높인 히트맵.png>)

### 시간 시각화
시점 요소가 있는 데이터는 시계열 형태로 표현할 수 있음.

- 전체적인 흐름을 한 눈에 확인
- 데이터의 트렌드나 노이즈를 쉽게 찾아낼 수 있음
- 선그래프 형태인 연속형과
- 막대 그래프 형태인 분절형으로 그릴 수 있음

#### 📈선그래프
연속형 시간을 시각화로 볼 수 있음

시간 간격의 밀도가 높을 때 사용한다. (ex: 초 단위의 데이터 / 일년간의 일별 판매량 데이터)

- 데이터의 양이 너무 많거나 변동이 심하면, **추세선을 삽입**해 들쭉날쭉한 데이터 흐름에 안정된 선을 추가함으로써 **<U>전체적인 경향이나 패턴을 쉽게 파악**</U>할 수 있음 

#### 🔎 추세선을 그리는 방법

이동평균 방법을 사용

데이터의 연속적 그룹의 평균을 구하는 것.

    예를 들어 시간 흐름에 따라 2→5→3→7→4의 값이 있다면 그 룰 옵션을 3개의 평균으로 했을 때 (2, 5, 3의 평균)→(5, 3, 7의 평균)→(3, 7, 4의 평균)으로 표현하는 것

#### 📊분절형 그래프
시간의 밀도가 낮은 경우에 활용하기 좋다 (EX: 1년동안의 월 간격 단위 흐름)

- 값들의 상대적 차이를 나타낼 때 유리
- 막대에 색상을 추가해서 특정 시점에 대한 정보를 추가할 수 있다.



<br>
<br>

# 확인 문제

## 문제 1.
> **🧚 공분산과 상관계수의 차이점에 대해 간단히 설명하세요.**


| 공분산 | 상관계수 |
|--------|----------|
| 두 변수가 **같은 방향**으로 움직이는지를 보여준다. | 두 변수가 **같은 방향으로 얼마나 강하게** 움직이는지를 보여준다. |
| 값의 크기에 제한이 없어 **해석이 어렵고**, 단위의 영향을 받는다. | 값이 **-1에서 1 사이**로 정해져 있어 **해석이 직관적**이다. |
| **각 변수간의 척도기준이 반영되므로, 서로 다른 데이터끼리 비교하기 어렵다.** | **서로 다른 데이터끼리도 비교 가능하다.** |
          



## 문제 2.
> **🧚 다음 데이터 분석 목표에 적합한 시각화 방법을 보기에서 모두 골라 연결해주세요.**

> 보기: 산점도, 선그래프, 막대그래프, 히스토그램, 박스플롯

(a) 변수의 분포 확인   
(b) 두 변수 간의 관계 확인   
(c) 집단별 평균 비교   
(d) 시계열 데이터 분석

<!--중복 가능-->

```
(a) 히스토그램, 박스플롯
(b) 산점도
(c) 박스플롯, 막대 그래프프
(d) 선 그래프
```


### 🎉 수고하셨습니다.